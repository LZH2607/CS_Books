# 第2章 数据的机器级表示与处理



[toc]



本章主要内容：
	进位计数制
	二进制定点数的编码表示
	无符号整数和带符号整数的表示
	IEEE 754浮点数表示标准
	西文字符和汉字的编码表示
	C语言中各种类型数据的表示和转换
	数据的宽度和存放顺序
	基本运算及其运算电路



## 2.1 数制和编码

### 2.1.1 信息的二进制编码

数据的不同表现形态：
	外部形式：数值、文字、图、声音、视频······（感觉媒体）
	算法描述的角度：图、表、树、队列、矩阵······
	高级语言程序员的角度：数组、结构、指针、实数、整数、布尔数、字符、字符串······
	机器指令的角度：整数、浮点数、位串（基本数据类型）

数字化编码：
	输入设备：感觉媒体信息 → 二进制编码
		功能：离散化、编码
	数字化编码过程：略
	信息编码的两大要素：基本符号的种类、组合规则

计算机内部采用二进制表示方式的原因：
![](D:\Notes\CS_Books\计算机系统\计算机系统基础_袁春风等\img\文本\31-1.png)

每条机器指令的操作数：
	无符号定点整数
	带符号定点整数
	浮点数
	非数值型数据（位串）
![](D:\Notes\CS_Books\计算机系统\计算机系统基础_袁春风等\img\图\图2.1.png)

指令所处理的数据类型：
	数值数据：数量
		整数（用定点数表示）：无符号整数、带符号整数
		实数（用浮点数表示）
	非数值数据：位串
		字符数据
		逻辑数据

数值数据的表示方式：
	二进制数
	二进制编码的十进制数（Binary Coded Decimal Number，BCD）

表示一个数值数据要确定三个要素：
	进位计数制
	定/浮点表示
	编码规则



### 2.1.2 进位计数制

![](D:\Notes\CS_Books\计算机系统\计算机系统基础_袁春风等\img\文本\32-1.png)

![](D:\Notes\CS_Books\计算机系统\计算机系统基础_袁春风等\img\文本\32-2.png)
![](D:\Notes\CS_Books\计算机系统\计算机系统基础_袁春风等\img\文本\33-1.png)

![](D:\Notes\CS_Books\计算机系统\计算机系统基础_袁春风等\img\文本\33-2.png)

| 进位计数制 |  R   |                    基本符号                    |
| :--------: | :--: | :--------------------------------------------: |
|   二进制   |  2   |                      0、1                      |
|   八进制   |  8   |             0、1、2、3、4、5、6、7             |
|   十进制   |  10  |          0、1、2、3、4、5、6、7、8、9          |
|  十六进制  |  16  | 0、1、2、3、4、5、6、7、8、9、A、B、C、D、E、F |

![](D:\Notes\CS_Books\计算机系统\计算机系统基础_袁春风等\img\表\表2.1.png)

后缀字母：
	二进制：B（Binary），如10011B
	八进制：O（Octal）
	十进制（可以省略）：D（Decimal），如56D、56
	十六进制：H（Hexadecimal）
		前缀：0x
		如308FH、0x308F

各进位计数制之间数据的转换方法：

#### 1. R进制数转换成十进制数

R进制数 → 十进制数：按权展开

![](D:\Notes\CS_Books\计算机系统\计算机系统基础_袁春风等\img\例题\例2.1.png)

![](D:\Notes\CS_Books\计算机系统\计算机系统基础_袁春风等\img\例题\例2.2.png)

![](D:\Notes\CS_Books\计算机系统\计算机系统基础_袁春风等\img\例题\例2.3.png)



#### 2. 十进制数转换成R进制数

十进制数 → R进制数：整数部分、小数部分分别进行转换
	整数部分的转换：除基取余，上右下左
	小数部分的转换：乘基取整，上左下右

![](D:\Notes\CS_Books\计算机系统\计算机系统基础_袁春风等\img\例题\例2.4.png)

![](D:\Notes\CS_Books\计算机系统\计算机系统基础_袁春风等\img\例题\例2.5.png)

![](D:\Notes\CS_Books\计算机系统\计算机系统基础_袁春风等\img\例题\例2.6-1.png)
![](D:\Notes\CS_Books\计算机系统\计算机系统基础_袁春风等\img\例题\例2.6-2.png)

![](D:\Notes\CS_Books\计算机系统\计算机系统基础_袁春风等\img\例题\例2.7.png)



#### 3. 二、八、十六进制数的相互转换

（1）八进制数转换成二进制数

![](D:\Notes\CS_Books\计算机系统\计算机系统基础_袁春风等\img\例题\例2.8.png)

（2）十六进制数转换成二进制数

![](D:\Notes\CS_Books\计算机系统\计算机系统基础_袁春风等\img\例题\例2.9.png)

（3）二进制数转换成八进制数

![](D:\Notes\CS_Books\计算机系统\计算机系统基础_袁春风等\img\文本\35-1.png)

（4）二进制数转换成十六进制数

![](D:\Notes\CS_Books\计算机系统\计算机系统基础_袁春风等\img\文本\35-2.png)



### 2.1.3 定点与浮点表示

小数点的表示问题：约定小数点的位置
定点数：小数点位置约定在固定位置的数
浮点数：小数点位置约定为可浮动的数



#### 1. 定点表示

定点表示法：
	定点小数：小数点固定在数的左边
		表示：浮点数的尾数部分
	定点整数：小数点固定在数的最右边
		表示：整数



#### 2. 浮点表示

![](D:\Notes\CS_Books\计算机系统\计算机系统基础_袁春风等\img\文本\36-1.png)

![](D:\Notes\CS_Books\计算机系统\计算机系统基础_袁春风等\img\文本\36-2.png)



### 2.1.4 定点数的编码表示

符号数字化：
	0：正号
	1：负号

机器数：数值数据在计算机内部编码表示后的数
真值：机器数真正的值（现实世界中带有正负号的数）

![](D:\Notes\CS_Books\计算机系统\计算机系统基础_袁春风等\img\文本\37-1.png)



#### 1. 原码表示法

原码表示法 / “符号-数值”（sign and magnitude）表示法：符号位+数值位

![](D:\Notes\CS_Books\计算机系统\计算机系统基础_袁春风等\img\文本\37-2.png)

优点：
	与真值的对应关系直观、方便 → 与真值之间的转换简单
	乘除运算：简便
缺点：
	0的表示不唯一，给使用带来不便
	加减运算：复杂

现代计算机：
	整数：不用原码表示
	浮点数的尾数部分：定点原码小数



#### 2. 补码表示法

补码表示法 / “2-补码”（two's complement）表示法：符号位+真值的模2<sup>n</sup>补码
	实现加减运算的统一：用加法来实现减法运算



（1）模运算

模运算系统：
	A = B + K $\times$ M（K为整数）
	记为：A ≡ B(mod M)
	A、B各除以M后的余数相同
	B和A为模M同余
	**一个数与它除以“模”后得到的余数是等价的**

对于某一确定的模，某数A减去小于模的另一数B，可以用A加上-B的补码来代替
→ 补码可以借助加法运算来实现减法运算

![](D:\Notes\CS_Books\计算机系统\计算机系统基础_袁春风等\img\例题\例2.10.png)

|  真值  | *补码* | 真值  | *补码* |  真值  | *补码* |  真值  | *补码* |
| :----: | :----: | :---: | :----: | :----: | :----: | :----: | :----: |
| **-6** |  *6*   | **0** |  *0*   | **6**  |  *6*   | **12** |  *0*   |
| **-5** |  *7*   | **1** |  *1*   | **7**  |  *7*   | **13** |  *1*   |
| **-4** |  *8*   | **2** |  *2*   | **8**  |  *8*   | **14** |  *2*   |
| **-3** |  *9*   | **3** |  *3*   | **9**  |  *9*   | **15** |  *3*   |
| **-2** |  *10*  | **4** |  *4*   | **10** |  *10*  | **16** |  *4*   |
| **-1** |  *11*  | **5** |  *5*   | **11** |  *11*  | **17** |  *5*   |

![](D:\Notes\CS_Books\计算机系统\计算机系统基础_袁春风等\img\例题\例2.11.png)

 两个n位二进制数在进行运算过程中，可能会产生一个多于n位的结果 → 舍弃高位，保留低n位：
	① 剩下的低n位数不能正确表示运算结果：丢掉的高位是运算结果的一部分，如两个同号数相加
		溢出（overflow）现象
	② 剩下的低n位数能正确表示运算结果：高位的舍去并不影响其运算结果，两个同号数相减/两个异号数相加



（2）补码的定义

![](D:\Notes\CS_Books\计算机系统\计算机系统基础_袁春风等\img\文本\39-1.png)



（3）特殊数据的补码表示

![](D:\Notes\CS_Books\计算机系统\计算机系统基础_袁春风等\img\例题\例2.12.png)

![](D:\Notes\CS_Books\计算机系统\计算机系统基础_袁春风等\img\例题\例2.13.png)

![](D:\Notes\CS_Books\计算机系统\计算机系统基础_袁春风等\img\例题\例2.14.png)
① 减少了+0和-0之间的转换
② 少占用一个编码表示，使补码比原码能多表示一个最小负数



（4）补码与真值之间的转换方法

正数的补码：符号位取0，其余各位同真值中对应各位
负数的补码：符号位取1，其余各位由数值部分“各位取反，末位加1”得到

![](D:\Notes\CS_Books\计算机系统\计算机系统基础_袁春风等\img\例题\例2.16.png)

由补码求真值：
	符号位为0：真值的符号为正，其数值部分不变
	符号位为1：真值的符号为负，其数值部分的各位由补码“各位取反，末位加1”所得

![](D:\Notes\CS_Books\计算机系统\计算机系统基础_袁春风等\img\例题\例2.17.png)

根据补码[X<sub>T</sub>]<sub>补</sub>求[-X<sub>T</sub>]<sub>补</sub>：对[X<sub>T</sub>]<sub>补</sub>“各位取反，末位加1”

![](D:\Notes\CS_Books\计算机系统\计算机系统基础_袁春风等\img\例题\例2.18.png)

![](D:\Notes\CS_Books\计算机系统\计算机系统基础_袁春风等\img\例题\例2.19.png)

结果溢出时：有的编译器不会做任何提示 → 意想不到的结果

（5）变形补码

变形补码 / 模4补码：双符号位
	左符：真正的符号位
	右符：用来判断溢出

![](D:\Notes\CS_Books\计算机系统\计算机系统基础_袁春风等\img\文本\41-1.png)

![](D:\Notes\CS_Books\计算机系统\计算机系统基础_袁春风等\img\例题\例2.20.png)



#### 3. 反码表示法

负数的补码：仅各位取反而末位不加1 / 在相应的补码表示中再末位减1

不足：
	0的表示不唯一
	表数范围比补码少一个最小负数
	运算时必须考虑循环进位

反码：
	在计算机中很少被使用
	数码变换的中间表示形式
	数据校验



#### 4. 移码表示法

浮点数：用两个定点数表示
	定点小数：浮点数的尾数
	定点整数：浮点数的阶（指数） → 移码

阶码：阶的编码

偏置常数（bias）：简化对阶操作
![](D:\Notes\CS_Books\计算机系统\计算机系统基础_袁春风等\img\文本\41-2.png)



## 2.2 整数的表示

整数 / 定点数：
	无符号整数（unsigned integer）
	带符号整数（signed integer）



### 2.2.1 无符号整数和带符号整数的表示

无符号整数 / 无符号数：正整数、非负整数
	所有二进位都用来表示数值，没有符号位
	场合：全部是正数且不出现负值结果（如地址运算、指针、下标······）

8位无符号整数：0000 0000 ~ 1111 1111
	取值范围：0 ~ 255

带符号整数 / 有符号整数：
	用一个二进位表示符号
	现代计算机中：用补码表示

8位带符号整数：
	表示范围：-128 ~ +127



### 2.2.2 C语言中的整数及其相互转换

C语言：
	无符号整数：unsigned short、unsigned int（unsigned）、unsigned long······
		在常数的后面加一个“u”/“U”，如12345U、0x2B3Cu
	带符号整数：short、int、long······

C语言标准：每种数据类型的最小取值范围

|          | short型 | int型 | long型 |
| :------: | :-----: | :---: | :----: |
| 16位机器 |  16位   | 16位  |        |
| 32位机器 |  16位   | 32位  |  32位  |
| 64位机器 |  16位   | 32位  |  64位  |

long long型：64位（ISO C99）

C语言：
	最早：贝尔实验室，Dennis M. Ritchie
	1977年：Dennis M. Ritchie，C语言编译文本《可移植的C语言编译程序》
	1978年：Brian W. Kernighan、Dennis M. Ritchie，《The C Programming Language》
	1988年：美国国家标准学会（ANSI），ANSI标准
		《The C Programming Language》第2版
	国际标准化组织（ISO）：
		ISO C90：1990年，几乎和ANSI C一样
		ISO C99：1999年
			引进：新的数据类型
			支持：英语以外的字符串文本